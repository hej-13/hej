## 1. 접근 통제(Access Control)

### 개요
- 정당한 사용자에게는 권한을 부여하고 그 외의 다른 사용자는 거부하는 것
- 스프링 시큐리티의 기술 문서에서는 **인증**을 `who are you?` 라고 표현하고 **인가**를 `what are you allowed to do?` 라는 문장으로 비유하고 있습니다.

| 단계                    | 내용                                         |
| --------------------- | ------------------------------------------ |
| 식별(Identification) 단계 | 사용자가 시스템에 본인이 누구라는 것을 밝히는 행위(예: ID)        |
| 인증(Authentication) 단계 | 사용자가 맞음을 시스템이 인정(예: Password, 스마트카드, 생체인증) |
| 인가(Authorization) 단계  | 접근 권한 유무 판별 후 접근 권한 부여                     |
	- 주체 : 자원의 접근을 요구하는 활동 개체(사람, 프로그램, 프로세스 등)
	- 객체 : 자원을 가진 수동적인 개체(Database, 컴퓨터, 파일 등)
	- 접근 : 주체와 객체의 정보 흐름 / CRUD
		- Create / Read / Update / Delete
		- SQL에서도 사용됨

### 2FA (Two-Factor Authentication)

- 2단계 인증, **지식, 소유, 존재, 행동기반 인증에서 2개를 같이 인증**하는 방법
- 아이디와 암호 + 2단계 인증 (문자인증, 지문, 홍채, Face, 어플푸쉬알림)

- 참고 - 인증방식에 따른 분류

| 인증 구분       | 설명                 | 기반     | 종류                         |
| ----------- | ------------------ | ------ | -------------------------- |
| Type I 인증   | Something you know | **지식** | Password, Pin, Passphrase  |
| Type II 인증  | Something you have | **소유** | Smart Card, Tokens         |
| Type III 인증 | Something you are  | **존재** | 홍채, 지문, 정맥                 |
| Type IV 인증  | Something you do   | **행동** | 음성, 서명, Keystroke Dynamics |

### 접근 통제의 목적

- 기밀성 (Confidentiality)
	• 데이터 및 정보가 정당하게 인정되는 개인, 조직 및 프로세스에만 개방 시키는 것
	• 비인가된 개인, 단체 등으로부터 중요한 정보를 보호하는 것, 노출되지 않는다는 확신을 제공하는 것
 - 무결성 (Integrity)
	- 정보의 변조 및 파괴를 예방하고 방지
	- 데이터 및 정보가 정확하고 완전하게 있는 것
	- Virustotal (hash check) : 파일의 해시값 확인해서 무결성 검증해주는 사이트
- 가용성 (Availability)
	- 정보를 이용자가 원하는 시기에 제공 가능하도록 보장
	- 제대로 동작되는지, 99.9%도 안됨. 100% 동작 해야함.
- 준거성
	- 기술적, 관리적, 물리적 보호조치 또는 개인정보보호 관련 법률 같은 법률적으로 규정된 사항을 지키지 못하는가?

### 접근 통제 정책 (Access Control Policies)

1. **DAC (Discretionary Access Control, 임의적 접근통제)**
	• 자원(파일, 폴더)의 소유자(owner) 가 접근 권한을 결정하는 방식
	• 윈도우/리눅스의 파일 권한 설정(읽기/쓰기/실행)이 대표적인 예
		 • ex) chmod 777 (4+2+1, RWX) (Read Write Execute)
	• 장점: 유연함
	• 단점: 소유자가 임의로 권한을 주다 보니 보안 관리가 약해질 수 있음

2. **MAC (Mandatory Access Control, 강제적 접근통제)**
	• 보안 등급(label) 에 따라 접근을 엄격히 통제하는 방식
		• 주로 군사/정부 시스템에서 사용 (ex: Top Secret, Secret, Confidential)
	• 사용자가 아니라 시스템이 접근 권한을 결정
	• 장점: 매우 강력한 보안
	• 단점: 유연성이 떨어지고 운영이 복잡

3. **RBAC (Role-Based Access Control, 역할 기반 접근통제)**
	• 사용자의 역할(role) 에 따라 접근 권한을 부여하는 방식
		• ex) 회사에서 "관리자", "직원", "인턴" 같은 역할별로 접근 범위 지정
	• 기업 환경에서 가장 많이 사용됨
	• 장점: 관리가 효율적, 대규모 조직에 적합
	• 단점: 역할(Role) 설계가 잘못되면 권한 관리가 꼬일 수 있음

4. **ABAC (Attribute-Based Access Control, 속성 기반 접근통제)**
	• 사용자 속성(직급, 부서, 위치, 시간 등) 과 자원 속성을 조건으로 접근을 제어
		• ex) “영업팀 직원이 근무 시간(09~18시) 내에서만 CRM 시스템 접근 가능”
	• 클라우드, 최신 보안 아키텍처에서 많이 쓰임
	• 장점:  매우 세밀한 제어 가능
	• 단점: 정책이 복잡해지면 관리 부담이 커짐

## 2. DLP vs DRM 솔루션

### 비교
- 상호 보완적인 관계
	DLP (Data Loss Prevention)
		• 데이터 유출 감지 / 차단
		• 이메일, 클라우드, USB 등을 통해 데이터 유출을 막음
	DRM (Digital Rights Management)
		• 데이터의 사용 권한을 제어하는 기술
		• 데이터의 사용 내역 및 권한에 초점을 둠

|  구분 | DLP (정보유출방지) | DRM (문서 보안)  |
| --- | --- | --- |
|  목적 | 내부 데이터 유출 방지 | 데이터 사용 권한 통제  |
|  방식 | 외부 유출할 수 있는 모든 경로를 차단 | 파일 암호화  |
|  강점 | 유출 예방 및 유출 내역 파악 | 유출 시 파일 암호화로 문서 열람 불가  |
|  추천 상황 | 데이터 유출 방지 및 법적 규제 준수가 필요한 경우 | 외부와의 콘텐츠 공유 시 권한 통제가 필요한 경우  |
### 취약점

- 하지만 취약점 : BRUTE FORCE (무차별 대입)
	- 영문자 숫자만 해서 8자리 이하면 1시간 내로 뚫림
	- 이처럼 암호의 안전성 = 해독할 수 있는 시간에 달려있다고 볼 수도 있다.
	- 네트워크와 연결되지 않는 경우, 입력 시도 횟수를 제어할 수 없기 때문에 시간이 무한적이라 파일 암호화 같은 경우 위험할 수 있음

## 3. 콘텐츠 보안 정책 (CSP)

### 개요

- 교차 사이트 스크립팅(XSS)과 데이터 주입 공격을 비롯한 특정 유형의 공격을 탐지하고 완화하는 데 도움이 되는 추가 보안 계층
- CSP의 주요 목표는 XSS 공격을 완화하고 보고하는 것.
![[07-01_p24_img2.jpeg]]

### 활성화 방법

1. <헤더 방식>
	Content-Security-Policy (영어) HTTP 헤더를 반환하도록 웹 서버를 구성해야 합니다. (가끔씩 X-Content-Security-Policy 헤더를 볼수도 있지만, 이는 이전 버전이므로 더 이상 설정할 필요가 없습니다.)
	
```HTTP
Content-Security-Policy: 설정할 정책 내용
```

2. <태그 방식>
	다른 방법으론, <meta> 요소를 사용하여 정책을 구성할 수 있습니다. 예를 들면 다음과 같습니다.
	
```HTML

<meta http-equiv="Content-Security-Policy" content="default-src 'self'">
```

### CSP 다양한 정책

```
#모든 콘텐츠는 현재 도메인에서만 제공되어야 한다.
Content-Security-Policy: default-src 'self'
#신뢰할 수 있는 특정 도메인과 그것의 모든 하위 도메인의 콘텐츠를 허용한다.
Content-Security-Policy: default-src 'self' *. trusted.com
#이미지는 모든 도메인, 미디어와 스크립트는 특정 도메인만 허용한다.
Content-Security-Policy: default-src 'self'; img-src *; media-src media1.com media2.com;
script-src userscripts.example.com
#콘텐츠 다운로드는 기본적으로 HTTPS를 사용하는 특정 도메인만 사용한다.
Content-Security-Policy: default-src https://onlinebanking.mybank.com
```

### 요약

- 브라우저는 소스에 코드에 상관없이 페이지에 요청하는 코드라면 무조건적으로 그 코드가 악의적인지 아닌지 상관없이 다운로드하여 실행하기 때문임.
- 이를 방지하기 위해 CSP를 사용.
- CSP는 신뢰할 수 있는 콘텐츠 소스의 허용 목록을 생성 할 수 있게 해주는 Content-Security-Policy HTTP 헤더를 정의하고 브라우저에는 이런 소스에서 받은 리소스만 실행하거나 렌더링할 것을 지시.

### [CSP Evaluator](https://csp-evaluator.withgoogle.com)

구글 제공 도구, 웹사이트의 **Content Security Policy(CSP)**가 **교차 사이트 스크립팅(XSS)** 등 공격에 대해 얼마나 강한 완화책이 되는지 검토해주는 평가기.
개발자·보안담당자가 수작업으로 검토하던 부분을 자동화해 **미묘한 우회(바이패스)** 가능성을 찾아주는 목적.

**주요 기능**
- CSP 텍스트(정책)를 입력하면 취약하거나 약한 설정을 지적해 줌(예: unsafe-inline, 광범위한 도메인 허용 등). 
- CSP 버전 선택(CSP v1/v2/v3) 기준으로 호환성·안전성 점검을 지원.
- 크롬 확장(Chrome extension) 형태로도 제공되어 개발자가 브라우저 환경에서 빠르게 검사 가능.

### CSP BYPASS

- [Content-Security-Policy (CSP) 정책 총정리 (+bypass)](https://lovflag.tistory.com/19)

## 4. 크롤링 (Crawling)

### 개요

- 웹사이트, 하이퍼링크, 데이터, 정보 자원을 자동화된 방법으로 수집, 분류, 저장하는 것. 
	- 보통 파이썬을 이용하여 Requests, Selenium과 같은 툴을 사용하여 데이터를 수집하거나, 스파이더 같은 프로그램을 사용하여 웹페이지에 검색에 대한 자동화 진행
	- 2022년에는 여행·숙박 어플리케이션 운영사 ‘여기어때’가 경쟁업체 ‘야놀자’의 데이터를 숙박업소 정보를 무단으로 유출해가며 ‘여기어때’에게 10억원 배상을 하라는 판결이 나오기도 하였음

### Robots.txt

크롤링 기술이 악용되어 정보를 무단으로 복제하게 되면 지식재산권 침해 문제가 발생할 수 있음
이러한 경우를 사전에 방지하기 위해 웹 페이지 소유자는 웹 페이지에 로봇 배제 표준을 사용하여 접근 제한에 대한 설명을 robots.txt에 기술.
하지만 이러한 노력에도 robots.txt에 명시된 부분 이상으로 데이터를 수집하는 경우가 비일비재 > 기술적으로 막기 어려움
- 기술적으로 막기 힘든 이유
	- 정상적인 사용자인지 악의적인 사용자인기 판단하는 기준점이 모호함
- 사용자를 식별할 수 있는 요소
	- IP > User-Agent / 변조 가능함
		- Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36

### 주요 크롤링 방식

1. **Google Bot과 같은 spider류**
	- 웹 사이트를 방문한 뒤, 데이터를 얻기 위해 다른 페이지에 대한 링크를 반복적으로 따라 들어간다. 
	- 특정 데이터를 얻기위해 필요한 대상을 크롤링하고, 페이지로부터 원하는 데이터를 추출할 수 있도록 HTML parser를 함께 사용하게 된다. 주로 검색엔진의 인덱싱을 위해 사용되는 방식이다.
2. **Shell-script**
	- 주로 Unix도구를 이용하여 크롤링을 시도할 때 사용된다. 
	- 주로 `curl` 또는 `wget` 명령어를 사용하여 웹 상의 데이터를 가져온다. 
	- 가져온 데이터에서 특정한 조건을 grep과 같은 텍스트 처리 도구를 사용하여 HTML을 파싱하여 정보를 가공한다. 
	- http 요청에서 추출된 데이터를 기반으로 정규식(regex)를 이용하여 원하는 데이터를 추출할 수 있다.
3. **jsoup, scrapy, Beautifulsoup 등 HTML parser**
	- Shell-script 정규 표현식 기반으로 된 도구들과 유사하게, HTML내의 패턴을 기반으로 해서 페이지 내의 데이터를 추출할 수 있다. 
	- 파이썬의 경우 주로 Requests나 Selenium과 같은 라이브러리와 결합하여 특정한 조건의 HTML 태그 내부 정보를 수집하는 형태로 많이 사용된다.
4. **Selenium과 같은 가상 브라우저**
	- 웹 브라우저의 자동화를 가능하게 하는 도구로 Javascript, AJAX와 같은 요소들을 실행하고, 웹 페이지로부터 원하는 텍스트를 수집하기 위해 주로 사용되고 있다. 
	- 작동하는 방식은 페이지가 로드되고 자바스크립트가 실행된 후, 브라우저에서 HTML을 가져온 다음 BeautifulSoup과 같은 HTML 구문 분석기를 사용하여 원하는 데이터 또는 텍스트를 추출한다. 
	- 혹은 렌더링된 페이지의 스크린 샷을 만들고, OCR을 사용하여 스크린샷으로부터 원하는 텍스트를 추출하기도 한다.  
	- 단, Selenium은 웹 브라우저 인스턴스를 실제로 실행하기 때문에 다른 HTTP 라이브러리나 웹 크롤링 라이브러리에 비해 더 많은 리소스를 사용하고 속도가 느리다.
5. **사람이 수행하는 복사와 붙여넣기**
	- 사람이 직접 웹사이트에 방문해서 서비스 내부의 컨텐츠를 복사하고 붙여 넣을 수 있다. 
	- 인건비가 싼 나라에서 이러한 방법을 사용하여 적용할 수 있을 것이다.

### 사용자를 식별할 수 있는 요소

- IP: 고정 IP가 아닌 이상 유동 IP는 사용자의 위치, 시간대별로 공유해서 사용하는 개념
- 통신사 IP(핸드폰)는 기본적으로 유동 IP이기 때문에 비행기모드를 껏다 켯다 하면 IP가 바뀜
- 크롤링하는 특정 클라이언트(봇)의 유동 IP를 차단하면 선의의 피해자가 생기기 때문에 어려움

### 관련기사

- [네이버, 구글 등 AI 붓 크롤링 차단…데이터 보호 vs 글로벌 경쟁력 약화](https://v.daum.net/v/20250716143440337)
	- 블로그·카페 등 핵심서비스서 오픈AI·퍼플렉시티·구글 AI봇 차단  
	- 오픈 API를 활용해 정책 준수하는 정보 수집은 허용  
	- 네이버, “과도한 크롤링 시도 제한하는 조치”  
	- 업계, “데이터 보호 위해 필요” vs “콘텐츠 노출 안되면 글로벌 경쟁력 저하”**

- CAPTCHA
	- Completely Automated Public Turing test to tell Computers and Humans Apart
	- '컴퓨터와 인간을 구분하기 위한 완전히 자동화된 공개 튜링 테스트'의 약자


### 네이버 쇼핑 크롤링 탐지 우회해보기
```
쇼핑 서비스 접속이 일시적으로 제한되었습니다.

네이버는 안정적인 쇼핑 서비스 제공하고자 시스템을 통해 아래와 같은 비정상적인 접근이 감지될 경우 해당 네트워크의 접속을 일시적으로 제한하고 있습니다.

- 상품 구매, 탐색과 무관한 외부 이벤트를 통한 접속
- 짧은 시간 내에 너무 많은 요청이 이루어진 IP
- VPN을 사용하여 접속한 IP
- 특정 확장 프로그램 이용 시

위와 같은 접근이 아님에도 접속이 제한된 경우,네이버앱을 업데이트 또는 원클릭 진단을 부탁드립니다. 해당 방법을 통해서도 접속이 불가한 경우 네이버쇼핑 고객센터로 문의 부탁드립니다.
```

- 주의 : DoS / DDoS와 같이 사이트에 장애를 줄 수 있는 악의적인 공격은 금지!!!

## Reference

- [04.정보보안 일반 - 02.접근 통제 | Bluesplatter](https://www.bluesplatter.com/is_certification/ISCert-04IS-02AccessControl/)
- [[Security] 접근 통제(Access Control)](https://yssa.tistory.com/entry/Security-접근-통제Access-Control)
- [DLP(정보유출방지)와 DRM의 차이 : 차이점 완벽 정리 | 블로그 | 콘텐츠 | 오피스키퍼](https://www.officekeeper.co.kr/blog/view/107)
- [컨텐츠 보안 정책 (CSP) - HTTP | MDN](https://developer.mozilla.org/ko/docs/Web/HTTP/Guides/CSP)
- [Content-Security-Policy (CSP) 정책 총정리 (+bypass)](https://lovflag.tistory.com/19)
- [크롤링에 대한 보안 기술](https://velog.io/@halfmoon_mind/크롤링에-대한-보안-기술)
- [보안으로 풀어보는 Rest API vs. GraphQL vs. HMAC 인증](https://velog.io/@technicalwriter/APISecurity-RestAPI-GraphQL-HMAC)
- [데이터 접근 제어 접근 통제 DAC, MAC, RBAC, 벨라파둘라(Bell - Lapadula)모델, 비바(BIBA) 모델, 클락-윌슨(Clark-Wilson), 만리장성 모델강제적 접근 통제(MAC) 모델, 무결성, 보안, 스테노가그래피, 기밀성](https://swingswing.tistory.com/43)
- [Content-Security-Policy (CSP) 정책 총정리 (+bypass)](https://lovflag.tistory.com/19)